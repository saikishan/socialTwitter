angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope","UserSvc",function(o,t){o.$on("login",function(t,n){alert("got the user data"+n),o.currentUser=n}),o.logout=function(){o.currentUser=null,t.logout()}}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc","$location",function(o,t,n){o.login=function(n,e){console.log("its loginfunction"),t.login(n,e).then(function(t){o.$emit("login",t.data)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(o,t){o.addPost=function(){console.log("entered on to addpost()"),console.log(o.postBody),o.postBody&&t.create({username:"kishan",body:o.postBody}).success(function(t){o.postBody=null})},o.$on("ws:new_post",function(t,n){o.$apply(function(){o.posts.unshift(n)})}),t.fetch().success(function(t){o.posts=t})}]),angular.module("app").service("PostsSvc",["$http",function(o){this.fetch=function(){return o.get("/api/posts")},this.create=function(t){return console.log("thepost is about to0 crate at  fe"),o.post("/api/posts",t)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(o,t){o.register=function(o,n){t.register(o,n)}}]),angular.module("app").config(["$routeProvider","$locationProvider",function(o,t){t.html5Mode({enabled:!0,requireBase:!1}),o.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}),o.when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}),o.when("/login",{controller:"LoginCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(o){var t=this,n=o.defaults.headers.common["X-Auth"];t.getUser=function(){return o.get("/api/users")},t.login=function(n,e){return o.post("/api/sessions",{username:n,password:e}).then(function(n){return t.token=n.data,o.defaults.headers.common["X-Auth"]=n.data,t.getUser()})},t.register=function(t,n){return o.post("/api/users",{username:t,password:n})},t.logout=function(){t.token=null,o.defaults.headers.common["X-Auth"]=n}}]),angular.module("app").run(["$rootScope","$timeout",function(o,t){!function n(){var e=new WebSocket("ws://localhost:3000");e.onopen=function(){console.log("websocket connected")},e.onclose=function(){console.log("connection drop trying to reconnect"),t(n,1e4)},e.onmessage=function(t){var n=JSON.parse(t.data);console.log("e data is"),console.log(t.data),o.$broadcast("ws:"+n.topic,n.data)}}()}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyIsIndlYnNvY2tldHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJVc2VyU3ZjIiwiJG9uIiwiXyIsInVzZXIiLCJhbGVydCIsImN1cnJlbnRVc2VyIiwibG9nb3V0IiwiJGxvY2F0aW9uIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiY29uc29sZSIsImxvZyIsInRoZW4iLCJyZXNwb25zZSIsIiRlbWl0IiwiZGF0YSIsIlBvc3RzU3ZjIiwiYWRkUG9zdCIsInBvc3RCb2R5IiwiY3JlYXRlIiwiYm9keSIsInN1Y2Nlc3MiLCJwb3N0IiwiJGFwcGx5IiwicG9zdHMiLCJ1bnNoaWZ0IiwiZmV0Y2giLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwiZ2V0IiwicmVnaXN0ZXIiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInJlcXVpcmVCYXNlIiwid2hlbiIsInRlbXBsYXRlVXJsIiwic3ZjIiwiZGVmYXVsdGgiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJnZXRVc2VyIiwidmFsIiwidG9rZW4iLCJydW4iLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCJjb25uZWN0IiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uY2xvc2UiLCJvbm1lc3NhZ2UiLCJlIiwicGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsIiRicm9hZGNhc3QiLCJ0b3BpYyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxZQ0RBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsU0FB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LEVBQUFJLFVBQUEsU0FBQUMsR0FDQSxJQUFBQyxFQUFBQyxLQUFBQyxNQUFBSCxFQUFBMUMsTUFDQUwsUUFBQUMsSUFBQSxhQUNBRCxRQUFBQyxJQUFBOEMsRUFBQTFDLE1BQ0FrQyxFQUFBWSxXQUFBLE1BQUFILEVBQUFJLE1BQUFKLEVBQUEzQyxPQWRBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLFtcclxuICAgICduZ1JvdXRlJ1xyXG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsZnVuY3Rpb24oJHNjb3BlLFVzZXJTdmMpe1xyXG4gICAgJHNjb3BlLiRvbignbG9naW4nLGZ1bmN0aW9uKF8sdXNlcil7XHJcbiAgICAgYWxlcnQoXCJnb3QgdGhlIHVzZXIgZGF0YVwiK3VzZXIpO1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICB9KVxyXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgLy8gICBhbGVydChcImlubG9nb3V0XCIpO1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlcj1udWxsO1xyXG4gICAgICAgIFVzZXJTdmMubG9nb3V0KCk7XHJcbiAgICB9XHJcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbi5jb250cm9sbGVyKCdMb2dpbkN0cmwnLGZ1bmN0aW9uKCRzY29wZSxVc2VyU3ZjLCRsb2NhdGlvbil7XHJcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJpdHMgbG9naW5mdW5jdGlvblwiKTtcclxuICAgICAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLHBhc3N3b3JkKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLHJlc3BvbnNlLmRhdGEpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSlcclxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsZnVuY3Rpb24oJHNjb3BlLFBvc3RzU3ZjKXtcclxuICAgICRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImVudGVyZWQgb24gdG8gYWRkcG9zdCgpXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5wb3N0Qm9keSk7XHJcbiAgICAgICAgaWYoJHNjb3BlLnBvc3RCb2R5KXtcclxuICAgICAgICAgICAgUG9zdHNTdmMuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAna2lzaGFuJyxcclxuICAgICAgICAgICAgICAgIGJvZHk6ICRzY29wZS5wb3N0Qm9keVxyXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKHBvc3Qpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RCb2R5PW51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICRzY29wZS4kb24oJ3dzOm5ld19wb3N0JyxmdW5jdGlvbihfLHBvc3Qpe1xyXG4gICAgICAgLy8gY29uc29sZS5sb2coXCJpbiB0aGUgcG9zdHMgY3RybFwiKTtcclxuICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAkc2NvcGUucG9zdHMudW5zaGlmdChwb3N0KTtcclxuICAgICAgIH0pIFxyXG4gICAgfSk7XHJcbiAgICBQb3N0c1N2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdHMpe1xyXG4gICAgICAgICRzY29wZS5wb3N0cz1wb3N0cztcclxuICAgIH0pO1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuc2VydmljZSgnUG9zdHNTdmMnLGZ1bmN0aW9uKCRodHRwKXtcclxuICAgIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKVxyXG4gICAgfVxyXG4gICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbihwb3N0KXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInRoZXBvc3QgaXMgYWJvdXQgdG8wIGNyYXRlIGF0ICBmZVwiKTtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycscG9zdCk7XHJcbiAgICB9XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJyxmdW5jdGlvbigkc2NvcGUsVXNlclN2Yyl7XHJcbiAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCl7XHJcbiAgICAgICAgVXNlclN2Yy5yZWdpc3Rlcih1c2VybmFtZSxwYXNzd29yZCk7XHJcbiAgICB9XHJcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwkbG9jYXRpb25Qcm92aWRlcil7XHJcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlXHJcbiAgICB9KTtcclxuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLHtjb250cm9sbGVyOidQb3N0c0N0cmwnLHRlbXBsYXRlVXJsOidwb3N0cy5odG1sJ30pO1xyXG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignL3JlZ2lzdGVyJyx7Y29udHJvbGxlcjonUmVnaXN0ZXJDdHJsJyx0ZW1wbGF0ZVVybDoncmVnaXN0ZXIuaHRtbCd9KTtcclxuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9sb2dpbicse2NvbnRyb2xsZXI6J0xvZ2luQ3RybCcsdGVtcGxhdGVVcmw6J2xvZ2luLmh0bWwnfSk7XHJcbn0pXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uc2VydmljZSgnVXNlclN2YycsZnVuY3Rpb24oJGh0dHApe1xyXG4gICAgdmFyIHN2YyA9IHRoaXM7XHJcbiAgICB2YXIgZGVmYXVsdGggPSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ107XHJcbiAgICBzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpO1xyXG4gICAgfVxyXG4gICAgc3ZjLmxvZ2luID0gZnVuY3Rpb24odXNlcm5hbWUscGFzc3dvcmQpe1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJyx7XHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkXHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbih2YWwpe1xyXG4gICAgICAgICAgICBzdmMudG9rZW4gPSB2YWwuZGF0YTtcclxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gdmFsLmRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnLHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6dXNlcm5hbWUscGFzc3dvcmQ6cGFzc3dvcmRcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgc3ZjLmxvZ291dCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc3ZjLnRva2VuID0gbnVsbDtcclxuICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ10gPSBkZWZhdWx0aDtcclxuICAgIH1cclxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCR0aW1lb3V0KXtcclxuICAgIChmdW5jdGlvbiBjb25uZWN0KCkge1xyXG4gICAgICAgIHZhciB1cmwgPSAnd3M6Ly9sb2NhbGhvc3Q6MzAwMCdcclxuICAgICAgICB2YXIgY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKTtcclxuICAgICAgICBjb25uZWN0aW9uLm9ub3BlbiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3ZWJzb2NrZXQgY29ubmVjdGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY29ubmVjdGlvbiBkcm9wIHRyeWluZyB0byByZWNvbm5lY3RcIik7XHJcbiAgICAgICAgICAgICR0aW1lb3V0KGNvbm5lY3QsMTAqMTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImUgZGF0YSBpc1wiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZS5kYXRhKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonK3BheWxvYWQudG9waWMscGF5bG9hZC5kYXRhKVxyXG4gICAgICAgIH1cclxuICAgIH0pKClcclxufSkiXX0=
