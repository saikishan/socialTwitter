angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope","UserSvc",function(o,t){o.$on("login",function(t,n){alert("got the user data"+n),o.currentUser=n}),o.logout=function(){o.currentUser=null,t.logout()}}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc","$location",function(o,t,n){o.login=function(n,e){console.log("its loginfunction"),t.login(n,e).then(function(t){o.$emit("login",t.data)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(o,t){o.addPost=function(){console.log("entered on to addpost()"),o.postBody&&t.create({username:"kishan",body:o.postBody}).success(function(t){o.postBody=null})},o.$on("ws:new_post",function(t,n){o.$apply(function(){o.posts.unshift(n)})}),t.fetch().success(function(t){o.posts=t})}]),angular.module("app").service("PostsSvc",["$http",function(o){this.fetch=function(){return o.get("/api/posts")},this.create=function(t){return console.log("thepost is about to0 crate at  fe"),o.post("/api/posts",t)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(o,t){o.register=function(o,n){t.register(o,n)}}]),angular.module("app").config(["$routeProvider","$locationProvider",function(o,t){t.html5Mode({enabled:!0,requireBase:!1}),o.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}),o.when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}),o.when("/login",{controller:"LoginCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(o){var t=this,n=o.defaults.headers.common["X-Auth"];t.getUser=function(){return o.get("/api/users")},t.login=function(n,e){return o.post("/api/sessions",{username:n,password:e}).then(function(n){return t.token=n.data,o.defaults.headers.common["X-Auth"]=n.data,t.getUser()})},t.register=function(t,n){return o.post("/api/users",{username:t,password:n})},t.logout=function(){t.token=null,o.defaults.headers.common["X-Auth"]=n}}]),angular.module("app").run(["$rootScope","$timeout",function(o,t){!function n(){var e=new WebSocket("ws://localhost:3000");e.onopen=function(){console.log("websocket connected")},e.onclose=function(){console.log("connection drop trying to reconnect"),t(n,1e4)},e.onmessage=function(t){var n=JSON.parse(t.data);console.log("e data is"),console.log(t.data),o.$broadcast("ws:"+n.topic,n.data)}}()}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyIsIndlYnNvY2tldHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJVc2VyU3ZjIiwiJG9uIiwiXyIsInVzZXIiLCJhbGVydCIsImN1cnJlbnRVc2VyIiwibG9nb3V0IiwiJGxvY2F0aW9uIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiY29uc29sZSIsImxvZyIsInRoZW4iLCJyZXNwb25zZSIsIiRlbWl0IiwiZGF0YSIsIlBvc3RzU3ZjIiwiYWRkUG9zdCIsInBvc3RCb2R5IiwiY3JlYXRlIiwiYm9keSIsInN1Y2Nlc3MiLCJwb3N0IiwiJGFwcGx5IiwicG9zdHMiLCJ1bnNoaWZ0IiwiZmV0Y2giLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwiZ2V0IiwicmVnaXN0ZXIiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInJlcXVpcmVCYXNlIiwid2hlbiIsInRlbXBsYXRlVXJsIiwic3ZjIiwiZGVmYXVsdGgiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJnZXRVc2VyIiwidmFsIiwidG9rZW4iLCJydW4iLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCJjb25uZWN0IiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uY2xvc2UiLCJvbm1lc3NhZ2UiLCJlIiwicGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsIiRicm9hZGNhc3QiLCJ0b3BpYyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxZQ0RBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsU0FB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QUMsRUFBQUMsS0FBQUMsTUFBQUgsRUFBQTFDLE1BQ0FMLFFBQUFDLElBQUEsYUFDQUQsUUFBQUMsSUFBQThDLEVBQUExQyxNQUNBa0MsRUFBQVksV0FBQSxNQUFBSCxFQUFBSSxNQUFBSixFQUFBM0MsT0FkQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJyxbXHJcbiAgICAnbmdSb3V0ZSdcclxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbi5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLGZ1bmN0aW9uKCRzY29wZSxVc2VyU3ZjKXtcclxuICAgICRzY29wZS4kb24oJ2xvZ2luJyxmdW5jdGlvbihfLHVzZXIpe1xyXG4gICAgIGFsZXJ0KFwiZ290IHRoZSB1c2VyIGRhdGFcIit1c2VyKTtcclxuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gICAgfSlcclxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xyXG4gICAgIC8vICAgYWxlcnQoXCJpbmxvZ291dFwiKTtcclxuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXI9bnVsbDtcclxuICAgICAgICBVc2VyU3ZjLmxvZ291dCgpO1xyXG4gICAgfVxyXG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uY29udHJvbGxlcignTG9naW5DdHJsJyxmdW5jdGlvbigkc2NvcGUsVXNlclN2YywkbG9jYXRpb24pe1xyXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24odXNlcm5hbWUscGFzc3dvcmQpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiaXRzIGxvZ2luZnVuY3Rpb25cIik7XHJcbiAgICAgICAgVXNlclN2Yy5sb2dpbih1c2VybmFtZSxwYXNzd29yZClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJyxyZXNwb25zZS5kYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0pXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQb3N0c0N0cmwnLGZ1bmN0aW9uKCRzY29wZSxQb3N0c1N2Yyl7XHJcbiAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJlbnRlcmVkIG9uIHRvIGFkZHBvc3QoKVwiKTtcclxuICAgICAgICBpZigkc2NvcGUucG9zdEJvZHkpe1xyXG4gICAgICAgICAgICBQb3N0c1N2Yy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6ICdraXNoYW4nLFxyXG4gICAgICAgICAgICAgICAgYm9keTogJHNjb3BlLnBvc3RCb2R5XHJcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdCl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdEJvZHk9bnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgJHNjb3BlLiRvbignd3M6bmV3X3Bvc3QnLGZ1bmN0aW9uKF8scG9zdCl7XHJcbiAgICAgICAvLyBjb25zb2xlLmxvZyhcImluIHRoZSBwb3N0cyBjdHJsXCIpO1xyXG4gICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpO1xyXG4gICAgICAgfSkgXHJcbiAgICB9KTtcclxuICAgIFBvc3RzU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihwb3N0cyl7XHJcbiAgICAgICAgJHNjb3BlLnBvc3RzPXBvc3RzO1xyXG4gICAgfSk7XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5zZXJ2aWNlKCdQb3N0c1N2YycsZnVuY3Rpb24oJGh0dHApe1xyXG4gICAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpXHJcbiAgICB9XHJcbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHBvc3Qpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwidGhlcG9zdCBpcyBhYm91dCB0bzAgY3JhdGUgYXQgIGZlXCIpO1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJyxwb3N0KTtcclxuICAgIH1cclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbi5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLGZ1bmN0aW9uKCRzY29wZSxVc2VyU3ZjKXtcclxuICAgICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uKHVzZXJuYW1lLHBhc3N3b3JkKXtcclxuICAgICAgICBVc2VyU3ZjLnJlZ2lzdGVyKHVzZXJuYW1lLHBhc3N3b3JkKTtcclxuICAgIH1cclxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCRsb2NhdGlvblByb3ZpZGVyKXtcclxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICByZXF1aXJlQmFzZTogZmFsc2VcclxuICAgIH0pO1xyXG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycse2NvbnRyb2xsZXI6J1Bvc3RzQ3RybCcsdGVtcGxhdGVVcmw6J3Bvc3RzLmh0bWwnfSk7XHJcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvcmVnaXN0ZXInLHtjb250cm9sbGVyOidSZWdpc3RlckN0cmwnLHRlbXBsYXRlVXJsOidyZWdpc3Rlci5odG1sJ30pO1xyXG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignL2xvZ2luJyx7Y29udHJvbGxlcjonTG9naW5DdHJsJyx0ZW1wbGF0ZVVybDonbG9naW4uaHRtbCd9KTtcclxufSlcclxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbi5zZXJ2aWNlKCdVc2VyU3ZjJyxmdW5jdGlvbigkaHR0cCl7XHJcbiAgICB2YXIgc3ZjID0gdGhpcztcclxuICAgIHZhciBkZWZhdWx0aCA9ICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXTtcclxuICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJyk7XHJcbiAgICB9XHJcbiAgICBzdmMubG9naW4gPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHZhbCl7XHJcbiAgICAgICAgICAgIHN2Yy50b2tlbiA9IHZhbC5kYXRhO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ10gPSB2YWwuZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uKHVzZXJuYW1lLHBhc3N3b3JkKXtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2Vycycse1xyXG4gICAgICAgICAgICB1c2VybmFtZTp1c2VybmFtZSxwYXNzd29yZDpwYXNzd29yZFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzdmMubG9nb3V0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBzdmMudG9rZW4gPSBudWxsO1xyXG4gICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSA9IGRlZmF1bHRoO1xyXG4gICAgfVxyXG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4ucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsJHRpbWVvdXQpe1xyXG4gICAgKGZ1bmN0aW9uIGNvbm5lY3QoKSB7XHJcbiAgICAgICAgdmFyIHVybCA9ICd3czovL2xvY2FsaG9zdDozMDAwJ1xyXG4gICAgICAgIHZhciBjb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldCh1cmwpO1xyXG4gICAgICAgIGNvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3dlYnNvY2tldCBjb25uZWN0ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29ubmVjdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb25uZWN0aW9uIGRyb3AgdHJ5aW5nIHRvIHJlY29ubmVjdFwiKTtcclxuICAgICAgICAgICAgJHRpbWVvdXQoY29ubmVjdCwxMCoxMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZSBkYXRhIGlzXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLmRhdGEpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicrcGF5bG9hZC50b3BpYyxwYXlsb2FkLmRhdGEpXHJcbiAgICAgICAgfVxyXG4gICAgfSkoKVxyXG59KSJdfQ==
