angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(n,o){t.currentUser=o})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,n){t.login=function(o,e){n.login(o,e).then(function(n){t.$emit("login",n.data)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(t,n){t.addPost=function(){t.postBody&&n.create({username:"kishan",body:t.postBody}).success(function(n){t.posts.unshift(n),t.postBody=null})},n.fetch().success(function(n){t.posts=n})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(n){return t.post("/api/posts",n)}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}),t.when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}),t.when("/login",{controller:"LoginCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var n=this;n.getUser=function(){return t.get("/api/users",{headers:{"X-Auth":this.token}})},n.login=function(o,e){return t.post("/api/sessions",{username:o,password:e}).then(function(t){return console.log(t.data),n.token=t.data,n.getUser()})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJvdXRlcy5qcyIsInVzZXIuc3ZjLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJG9uIiwiXyIsInVzZXIiLCJjdXJyZW50VXNlciIsIlVzZXJTdmMiLCJsb2dpbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ0aGVuIiwicmVzcG9uc2UiLCIkZW1pdCIsImRhdGEiLCJQb3N0c1N2YyIsImFkZFBvc3QiLCJwb3N0Qm9keSIsImNyZWF0ZSIsImJvZHkiLCJzdWNjZXNzIiwicG9zdCIsInBvc3RzIiwidW5zaGlmdCIsImZldGNoIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwic3ZjIiwiZ2V0VXNlciIsImhlYWRlcnMiLCJYLUF1dGgiLCJ0b2tlbiIsInZhbCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLE9BQ0EsWUNEQUQsUUFBQUMsT0FBQSxPQUNBQyxXQUFBLG1CQUFBLFNBQUEsU0FBQUMsR0FDQUEsRUFBQUMsSUFBQSxRQUFBLFNBQUFDLEVBQUFDLEdBQ0FILEVBQUFJLFlBQUFELE9DSEFOLFFBQUFDLE9BQUEsT0FDQUMsV0FBQSxhQUFBLFNBQUEsVUFBQSxTQUFBQyxFQUFBSyxHQUVBTCxFQUFBTSxNQUFBLFNBQUFDLEVBQUFDLEdBQ0FILEVBQUFDLE1BQUFDLEVBQUFDLEdBQ0FDLEtBQUEsU0FBQUMsR0FDQVYsRUFBQVcsTUFBQSxRQUFBRCxFQUFBRSxZQ05BZixRQUFBQyxPQUFBLE9BQUFDLFdBQUEsYUFBQSxTQUFBLFdBQUEsU0FBQUMsRUFBQWEsR0FDQWIsRUFBQWMsUUFBQSxXQUNBZCxFQUFBZSxVQUNBRixFQUFBRyxRQUNBVCxTQUFBLFNBQ0FVLEtBQUFqQixFQUFBZSxXQUNBRyxRQUFBLFNBQUFDLEdBQ0FuQixFQUFBb0IsTUFBQUMsUUFBQUYsR0FDQW5CLEVBQUFlLFNBQUEsUUFJQUYsRUFBQVMsUUFBQUosUUFBQSxTQUFBRSxHQUNBcEIsRUFBQW9CLE1BQUFBLE9DYkF2QixRQUFBQyxPQUFBLE9BQUF5QixRQUFBLFlBQUEsUUFBQSxTQUFBQyxHQUNBQyxLQUFBSCxNQUFBLFdBQ0EsT0FBQUUsRUFBQUUsSUFBQSxlQUVBRCxLQUFBVCxPQUFBLFNBQUFHLEdBQ0EsT0FBQUssRUFBQUwsS0FBQSxhQUFBQSxPQ0xBdEIsUUFBQUMsT0FBQSxPQUFBNkIsUUFBQSxpQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxLQUFBLEtBQUE5QixXQUFBLFlBQUErQixZQUFBLGVBQ0FGLEVBQUFDLEtBQUEsYUFBQTlCLFdBQUEsZUFBQStCLFlBQUEsa0JBQ0FGLEVBQUFDLEtBQUEsVUFBQTlCLFdBQUEsWUFBQStCLFlBQUEsa0JDSEFqQyxRQUFBQyxPQUFBLE9BQ0F5QixRQUFBLFdBQUEsUUFBQSxTQUFBQyxHQUNBLElBQUFPLEVBQUFOLEtBQ0FNLEVBQUFDLFFBQUEsV0FDQSxPQUFBUixFQUFBRSxJQUFBLGNBQ0FPLFNBQUFDLFNBQUFULEtBQUFVLFVBR0FKLEVBQUF6QixNQUFBLFNBQUFDLEVBQUFDLEdBQ0EsT0FBQWdCLEVBQUFMLEtBQUEsaUJBQ0FaLFNBQUFBLEVBQUFDLFNBQUFBLElBQ0FDLEtBQUEsU0FBQTJCLEdBR0EsT0FGQUMsUUFBQUMsSUFBQUYsRUFBQXhCLE1BQ0FtQixFQUFBSSxNQUFBQyxFQUFBeEIsS0FDQW1CLEVBQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLFtcclxuICAgICduZ1JvdXRlJ1xyXG5dKTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsZnVuY3Rpb24oJHNjb3BlKXtcclxuICAgICRzY29wZS4kb24oJ2xvZ2luJyxmdW5jdGlvbihfLHVzZXIpe1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICB9KVxyXG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uY29udHJvbGxlcignTG9naW5DdHJsJyxmdW5jdGlvbigkc2NvcGUsVXNlclN2Yyl7XHJcblxyXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24odXNlcm5hbWUscGFzc3dvcmQpe1xyXG4gICAgICAgIFVzZXJTdmMubG9naW4odXNlcm5hbWUscGFzc3dvcmQpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJyxyZXNwb25zZS5kYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0pXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQb3N0c0N0cmwnLGZ1bmN0aW9uKCRzY29wZSxQb3N0c1N2Yyl7XHJcbiAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoJHNjb3BlLnBvc3RCb2R5KXtcclxuICAgICAgICAgICAgUG9zdHNTdmMuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAna2lzaGFuJyxcclxuICAgICAgICAgICAgICAgIGJvZHk6ICRzY29wZS5wb3N0Qm9keVxyXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKHBvc3Qpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdEJvZHk9bnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgUG9zdHNTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcclxuICAgICAgICAkc2NvcGUucG9zdHM9cG9zdHM7XHJcbiAgICB9KTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLnNlcnZpY2UoJ1Bvc3RzU3ZjJyxmdW5jdGlvbigkaHR0cCl7XHJcbiAgICB0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Bvc3RzJylcclxuICAgIH1cclxuICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24ocG9zdCl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLHBvc3QpO1xyXG4gICAgfVxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKXtcclxuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLHtjb250cm9sbGVyOidQb3N0c0N0cmwnLHRlbXBsYXRlVXJsOidwb3N0cy5odG1sJ30pO1xyXG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignL3JlZ2lzdGVyJyx7Y29udHJvbGxlcjonUmVnaXN0ZXJDdHJsJyx0ZW1wbGF0ZVVybDoncmVnaXN0ZXIuaHRtbCd9KTtcclxuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9sb2dpbicse2NvbnRyb2xsZXI6J0xvZ2luQ3RybCcsdGVtcGxhdGVVcmw6J2xvZ2luLmh0bWwnfSk7XHJcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbi5zZXJ2aWNlKCdVc2VyU3ZjJyxmdW5jdGlvbigkaHR0cCl7XHJcbiAgICB2YXIgc3ZjID0gdGhpcztcclxuICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJyx7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6eydYLUF1dGgnOiB0aGlzLnRva2VufVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzdmMubG9naW4gPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHZhbCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbC5kYXRhKTtcclxuICAgICAgICAgICAgc3ZjLnRva2VuID0gdmFsLmRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0pIl19
